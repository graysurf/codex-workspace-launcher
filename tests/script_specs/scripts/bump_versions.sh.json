{
  "smoke": [
    {
      "name": "help",
      "command": ["bash", "scripts/bump_versions.sh", "--help"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)usage:.*scripts/bump_versions\\.sh"
      }
    },
    {
      "name": "update_versions_temp_repo",
      "command": [
        "bash",
        "-c",
        "set -euo pipefail; tmp=$(mktemp -d 2>/dev/null || true); if [[ -z \"${tmp:-}\" ]]; then tmp=\"/tmp/cws-smoke.bump_versions.$$\"; mkdir -p -- \"$tmp\"; fi; cleanup(){ rm -rf -- \"$tmp\" >/dev/null 2>&1 || true; }; trap cleanup EXIT; mkdir -p -- \"$tmp/scripts\" \"$tmp/.venv/bin\"; cp scripts/bump_versions.sh \"$tmp/scripts/\"; chmod +x \"$tmp/scripts/bump_versions.sh\"; printf '%s\\n' 'ZSH_KIT_REF=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' 'CODEX_KIT_REF=bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb' >\"$tmp/VERSIONS.env\"; : >\"$tmp/requirements-dev.txt\"; printf '%s\\n' '#!/usr/bin/env bash' 'exit 0' >\"$tmp/.venv/bin/python\"; chmod +x \"$tmp/.venv/bin/python\"; git -C \"$tmp\" init -q; \"$tmp/scripts/bump_versions.sh\" --zsh-kit-ref 1111111111111111111111111111111111111111 --codex-kit-ref 2222222222222222222222222222222222222222 --skip-checks --skip-docker --skip-bundle; grep -q '^ZSH_KIT_REF=1111111111111111111111111111111111111111$' \"$tmp/VERSIONS.env\"; grep -q '^CODEX_KIT_REF=2222222222222222222222222222222222222222$' \"$tmp/VERSIONS.env\"; echo OK"
      ],
      "timeout_sec": 20,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?m)^OK$"
      }
    }
  ]
}
